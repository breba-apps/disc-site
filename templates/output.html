<iframe id="output-frame" class="w-100" style="height: 85vh;" src="/preview" frameborder="0"></iframe>

<script>
const iframe = document.getElementById('output-frame');

// Optional: wait until iframe is ready
iframe.addEventListener('load', () => {
    const ws = new WebSocket("{{ socket_server }}/ws/output");

    ws.onmessage = (event) => {
        if (event.data === "__ping__") {
            ws.send("__pong__");
            return;
        }
        iframe.contentWindow.postMessage({
            type: 'append-html',
            html: event.data
        }, '*');  // You can use specific origin if needed
    };
});
</script>